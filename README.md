# Visualization Of Lattice Material
**대구과학고등학교 김윤호, 장준서, 전재현**

본 연구는 대구과학고등학교 현장연구와 한국 청소년 학술 대회 KSCY에 참여하였습니다. 연구의 진행에 도움을 주신 대구과학고등학교 선생님들과 KIST 서진유 박사님께 정말 감사합니다.

프로그램 실행 영상은 Youtube 를 참고해주시길 바랍니다.
[https://www.youtube.com/watch?v=wELzF4JlrSo](https://www.youtube.com/watch?v=wELzF4JlrSo)

## Summary
본 연구는 금속이나 세라믹과 같은 무기질 재료의 구조를 분석하는 X선 회절이나 투과전자현미경과 같은 분석 장치들의 데이터베이스를 불러들여 소프트웨어로 시각화 하는 오픈 소스 소프트웨어를 개발하는 것을 목적으로 한다. 회절 데이터를 이용해 결정구조를 분석하는 공학용 소프트웨어들이 존재하지만, 대부분이 유료이며, 일반인, 중고등학생 및 대학생 수준에서 직관적으로 다양한 결정의 구조에 대한 시각적 정보를 얻을 수 있는 Open-Source Software는 찾을 수 없었다. 고정되어 있는 한정된 사진자료로만 알 수 있던 고체 결정구조를 고체의 종류에 제한 없이, 다양한 방향에서 결정구조를 관찰할 수 있도록 유기적인 시스템을 구축하는 것 또한 이 연구의 목적이다.

3차원 결정구조의 검색, 가시화 시스템을 구축하기 위해서 C++ OpenGL, Qt Library를 사용할 것이며, 보다 발전적인 연구를 위해 Prototype을 개발하였다. 원소들의 정보가 담긴 소규모 데이터베이스를 작성해 원소 검색 시스템을 개발하였으며, 입방 정계와 틈새 자리의 결정구조를 가시화하는 모듈을 OpenGL을 이용해 작성하였다. 이때 자유로운 결정 회전을 위해 Rotation Matrix를 이용해 결정을 사용자가 원하는 대로 움직이는 것을 구현하였다.

작성된 소프트웨어는 공개해 실험실 또는 교육현장에서 활용 가능하며 지속적인 업그레이드를 통해 공학 및 과학 분야에서 활용될 수 있을 것으로 생각된다. 또한 현재까지 작성된 Prototype을 기반으로 회절 무늬 분석, 단계별 구조 가시화와 같은 기능들을 추가해 GitHub에 코드를 공개하여, 더 많은 사람들이 개선, 학습, 활용할 수 있는 시스템이 될 것으로 예상된다.

## Introduction
*결정 구조 가시화 Open-Source Software의 부재*

현재 중고등학생은 결정구조를 이해하기 위한 무료 소프트웨어를 접하기 어렵다. 재료의 결정구조는 다양한 빔을 재료에 산란 시켰을 때 원자 배열의 규칙성에 의해 나타나는 회절 현상을 통해 분석된다. 따라서 회절 데이터를 이용하여 재료의 결정구조를 분석하기 위해 다양한 이론과 전문 공학용 소프트웨어가 존재한다. 하지만 대부분은 시각적 정보를 얻는 것 이상의 많은 정보를 제공하기 때문에 유료이다. 그리고 일반인 혹은 중 고등학생 혹은 대학생이 직관적으로 다양한 결정구조의 시각적 정보를 얻기 위한 무료 소프트웨어는 찾기 어렵다.

## Purpose and Significance of the Study

우리가 일상생활에서 접하는 물질들을 포함하여 지구상에 존재하는 다양한 물질 들 중에서 고분자, 플라스틱, 유리 등을 제외한 대다수 금속, 세라믹 물질들은 원자들이 일정한 간격으로 규칙적으로 배열된 결정구조(Crystal structure)를 가지고 있다. 재료의 결정구조는 재료의 전기적, 광학적, 기계적 성질 등 재료의 다양한 물성(Material property)을 결정하는 중요한 요소이며, 물리학, 전자공학, 재료공학, 기계공학, 광물학 등 다양한 공학 및 자연과학의 출발점이 된다.

재료의  결정구조를  실험적으로  분석할  때는 X-선, 전자빔, 중성자빔과  같은  다양한  빔을  재료에  산란 시킬  때  원자들의  규칙성으로  인해  발생하는  회절(Diffraction) 현상을  이용한다. 회절 현상은  재료가  규칙적인  결정구조를  갖고  있기  때문에  일어나는  현상이므로, 회절  데이터를  이용하여  재료의  결정구조를  분석하기  위해  다양한  이론과  전문  공학용  소프트웨어가  존재한다.하지만  대부분의  소프트웨어는  유료소프트웨어이며  또한  일반인  또는  중고등학생  및  대학생  수준에서  직관적으로  다양한  결정의  구조에  대한  시각적  정보를  얻을  수  있는 freeware소프트웨어는  찾기가  어렵다.따라서  본  현장  연구를  통해  재료의  결정구조에  대한  기초지식을  습득함과  동시에  재료의  결정구조를 3차원  도형으로  가시화하여  원하는  방향으로  회전시키면서  쉽게  재료의  결정구조를  볼  수  있는  소프트웨어의  초기  버전을  개발하고자  하였다.

##  Methods of Analysis and Data Collection

더욱 발전적인 연구의 진행을 위해 우리 팀은 본 연구의 계획 기간 동안 Prototype을 제작하였다. 제작한 Prototype 모형은 저장된 83개 원소의 결정 구조 데이터베이스를 바탕으로, 사용자가 원소를 검색 시, 해당 원소의 물리적 정보와 결정 구조를 3차원으로 출력하는 연구를 진행하였다. 재료의 결정구조를 가시화하기 위해 C++ 언어를 사용하였고. 그래픽 구현을 위해 GLUT openGL(Graphic Library)를 사용하였다. 다양한 결정구조에 대한 가시화를 위해 몇 가지 금속 소재에 대한 소규모 데이터베이스를 작성하여 메인 프로그램에서 특정 결정을 open 할 수 있도록 graphic user interface (GUI)를 설정하였다. 또한 결정구조를 사용자가 원하는 각도에서 볼 수 있도록 결정을 회전시키는 알고리즘을 직접 작성하였고, 이를 위해 3차원 구조에서 3개의 주요 축들 (x, y, z축) 중의 하나를 중심으로 회전하는 2차원 회전 행렬(matrix)을 두 개 이상의 축에 활용하여 사용자가 결정을 원하는 방향으로 임의로 동시에 직관적으로 회전하여 결정을 관찰할 수 있도록 구성하였다.

## Visualization of 3D Crystal Structure

**개발 환경과 Cross-Platform 개발을 위한 GLUT/Standard Library의 선언**

본 연구를 진행하기 위해 입체 도형을 쉽게 그릴 수 있는 Open Source Library인 OpenGL을 이용하였다. OpenGL외에는 C++ 표준 라이브러리 만을 사용하였고 <stdlib.h>, <stdio.h>, <iostream>, <math.h>, <vector>, <string.h>의 라이브러리들을 import하였다. 개발 환경은 Mac OSX 10.13에서 진행하였고 개발자도구로는 XCode를 사용하였다. Standard C++11 환경에서 LLVM 9.1.0컴파일러로 컴파일하였고 테스트도 동일한 MAC OSX 10.13에서 진행하였다.

3차원 결정구조 프로그램 작성을 위한 개발 환경

더욱 발전적인 Cross Platform Software 개발을 위해 OSX/Linux 환경과 Windows 환경에서 실행될 수 있도록 Library를 import하였다.

#ifdef __APPLE__
#include <GLUT/glut.h>
#else
#include <GL/glut.h>
#endif
#ifdef WINDOWS
#include <direct.h>
#include <stdlib.h>
#include <stdio.h>
#include <iostream>
#include <math.h>
#include <vector>
#include <string.h>

**SC, BCC, FCC, HCP** **결정 구조와 Tetrahedral, Octahedral Site 함수 제작**

효율적인 역할 분담과 코드 작성을 위해 모든 기능들을 모튤화 시키려 노력하였고, 각각의 결정 구조를 그리는 sc_display(), bcc_display(), fcc_display(), hcp_display() 함수와 틈새 자리의 원자 배치를 그리는 tetra_bcc_display(), octa_bcc_display(), tetra_fcc_display(), octa_fcc_display() 함수를 제작하였다. Simple Cubic, Body Centered Cubic, Face Centered Cubic, Hexagonal Closed Packed 4가지 결정구조를 제작하였다. 또한 결정구조를 쉽게 확인하기 위해 Wireframe Cube를 제작하였고 HCP의 경우에는 Wireframe함수를 따로 제작하였다. 카메라의 위치를 위해 원점을 (0,0,-6.5)로 해 각 결정구조에서의 원자의 위치를 계산하였다. 계산한 좌표는 OpenGL의 glTranslated()의 x, y, z값으로 이용하나 회전 변환을 위해 제작한 x_t(), y_t(), z_t()함수의 리턴 값의 형태로 좌표 값을 대입하였다.

glTranslated(x_t(x,y,z), y_t(x,y,z), z_t(x,y,z));


**키보드/마우스 UI**

본 연구에서는 사용자의 편의성을 위해 구조를 바라보는 방향과 구조의 회전을 마우스와 키보드로 쉽게 조절할 수 있도록 UI를 개발하였다.

## Construction of Crystal Structure Database and its Application

이번 프로그램의 개발에서는 원소 기호, 원소 구조, 양성자 수, 원자량, 밀도, 원자 반지름. 녹는점, 끓는점 정보를 담는 소규모 데이터베이스를 구축하기로 하였다.

## Visualizing Rotation of Crystal Structure using Rotation Matrix

원자들의  좌표를  지정한  후  회전  기능을  추가하기  위해서 float형  각도변수 rot와 rot2를  선언하였다. rot와 rot2는  각각 z축과 y을  기준으로  회전한  각도를  의미한다. 원자들의  각  좌표를  회전시키는  데에  필요한  회전matrix에  대하여  조사해보았다.

## Element Search System, Appearance Function

본 연구에서 개발하는 프로그램은 근본적으로 사용자가 원하는 원소의 정보를 제공함에 목적이 있기 때문에 원소 검색기능이 구현될 것이다. 원소를 검색하면, 해당 원소의 원자량, 원자 반지름의 정보를 제공한다. 또한 해당 원소로 이루어진 고체의 밀도, 녹는점, 끓는점, 결정 구조, 회절 무늬의 정보를 제공한다. 이때, 회절 무늬는 결정 구조를 출력하는 방식처럼 가시화를 통해서 사용자가 관찰할 수 있도록 할 것이다. 고체의 결정구조의 경우, 아래의 그림과 같이 구조의 이해를 돕기 위해 일정한 시간 간격을 두고 원자를 추가해 나가는 방식으로 구성 될 것이다.

프로그램의 취지에 맞게 교육용으로 사용된다면, 사진을 통한 구조 관찰보다 훨씬 자세한 구조 관찰을 가능하게 하기 때문에 학생들의 이해도가 높아질 것이다. 그리고 프로그램을 이용함으로써 더욱 손쉽게 원소에 대한 정보를 얻을 수 있기 때문에 교육의 효율을 높일 것이다. 또한, ‘github’와 같은 사이트에 소스코드를 공개함으로써 학생들이 무료로 사용할 수 있도록 하고, 많은 사람들에 의해 다양한 개발이 된다면, 더 많은 정보를 제공하는 프로그램으로 발전해 나갈 수 있을 것이다.
